<!DOCTYPE html>
<html lang="en"dir="ltr" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <title>SCMXpertLite</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ"
          crossorigin="anonymous"/>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<div class="jumbotron text-center bg-dark"
     style="margin-bottom: -20px; margin-top: -10px; text-align: center">
    <h1 class="text-white">SCMXpertLite</h1>
    <h3 class="text-danger">The Better Way to Shipments</h3>
</div>
<nav class="navbar navbar-expand-sm  sticky-top"
     style="box-shadow: 0.3em 0.3em 5em rgb(0, 0, 0); background: rgb(58, 58, 58);">
    <a class="navbar-brand text-white" href="/home.html"><strong>SCM</strong></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
</nav>
<div class="container-fluid" style="background: rgb(0, 0, 0);">
    <div class="row">
        <div class="col-sm-3" style="margin-top: 17px;">
            <h3 class="text-danger"><i class="fa fa-bars fa-sm"></i>&nbsp;<strong>SCMXpertLite Services</strong></h3>
            <ul class="text-white">
                <li>Inventory Management</li>
                <li>Procurement</li>
                <li>Warehouse Management</li>
                <li>Logistics</li>
                <li>Supplier Relationship Management</li>
                <li>Order Fulfillment</li>
                <li>Demand Forecasting</li>
                <li>Transportation Management</li>
                <li>Supply Chain Analytics</li>
                <li>Reverse Logistics</li>
                <li>Product Lifecycle Management</li>
                <li>Quality Control</li>
                <li>Customs Compliance</li>
                <li>Supplier Diversity Programs</li>
                <li>Risk Management</li>
                <li>Strategic Sourcing</li>
                <li>Ethical Sourcing</li>
                <li>Supplier Audits</li>
                <li>Supply Chain Sustainability</li>
                <li>EDI (Electronic Data Interchange)</li>
                <li>Performance Management</li>


            </ul>
        </div>

        <div class="col-sm-9" style="margin-top: -28px;">
            <!-- About Supply Chain Management Section -->
            <div class="container mt-5 text-white">
                <h2 class="text-danger"><strong>About Supply Chain Management</strong></h2>
                <p>
                    Supply chain management (SCM) plays a crucial role in the modern business landscape, 
                    serving as the backbone of global commerce. At its core, SCM encompasses the planning, execution, control, 
                    and monitoring of all activities involved in the flow of goods and services from their initial production to their final delivery to customers. 
                    This process involves a series of interconnected steps, including procurement, manufacturing, transportation, warehousing, distribution, 
                    and ultimately, customer satisfaction.
                </p>

            </div>
            <div class="row justify-content-center align-items-center">
                <!-- Modal body -->
            <div class="modal-body modal-boprimary col-sm-4 bg-dark" style="border-radius: 2%; padding: 15px;">
                <ul class="nav nav-tabs" id="loginTabs" role="tablist">
                    <li class="nav-item" style="padding: 5px;">
                        <a class="nav-link active text-danger" id="login-tab" data-toggle="tab"
                           href="#login" role="tab" aria-controls="login" aria-selected="true">
                            <strong>Login</strong>
                        </a>
                    </li>
                    <li class="nav-item"  style="padding: 5px;">
                        <a class="nav-link text-danger" id="register-tab" data-toggle="tab"
                           href="#register" role="tab" aria-controls="register" aria-selected="false">
                            <strong>Register</strong>
                        </a>
                    </li>
                </ul>


                <div class="tab-content" id="loginTabContent"  style="padding: 5px;">
                    <!-- Login Form -->
                    <div class="tab-pane fade show active" id="login" role="tabpanel"
                         aria-labelledby="login-tab" >
                        <form id="loginForm">
                    
                            <!-- UserName (No Numbers or Special Characters Except ".") -->
                            <div class="form-group">
                                <label for="Email"
                                       class="fa fa-user-tie fa-md text-white">&nbsp; &nbsp;Email</label>
                                <input type="text" class="form-control" id="email" name="email"
                                       required/>
                            </div>
                            <!-- Password (Complex Requirements) -->
                            <div class="form-group">
                                <label for="password"
                                       class="fa fa-lock fa-md text-white">&nbsp; &nbsp;Password</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="password"
                                           name="password" required pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"title="Password must contain at least one number, one uppercase and lowercase letter, and at least 8 or more characters"/>
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-warning" type="button"
                                                id="togglePassword">
                                            <i class="fa fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                           <!-- <p id="errorMessage" class="text-danger font-weight-bold"></p> -->
                            <div id="errorMessage1" style="display: none;" class="alert alert-danger" role="alert">Registration failed. User Exists!</div>
                            <button type="submit" class="btn btn-success" >Login</button>
                        </form>
                    </div>


                    <!-- Register Form -->
                    <div class="tab-pane fade" id="register" role="tabpanel"
                         aria-labelledby="register-tab">
                        <form id="registerForm">
                            <!-- Full Name (No Numbers or Special Characters Except ".") -->
                            <div class="form-group">
                                <label for="UserName"
                                       class="fa fa-user-tie fa-md text-white">&nbsp; &nbsp;Username</label>
                                <input type="text" class="form-control" id="username"
                                       name="username" required/>
                            </div>
                            <div class="form-group">
                                <label for="Email"
                                       class="fa fa-user-tie fa-md text-white">&nbsp; &nbsp;Email</label>
                                <input type="email" class="form-control" id="regEmail" name="email" required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" />

                            </div>
                            <div class="form-group">
                                <label for="regPassword"
                                       class="fa fa-lock fa-md text-white">&nbsp; &nbsp;Password</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="regPassword"
                                           name="password" required pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                           title="Password must contain at least one number, one uppercase and lowercase letter, and at least 8 or more characters"/>
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-warning" type="button"
                                                id="toggleRegPassword">
                                            <i class="fa fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- Error message placeholder -->
                            <div id="errorMessage" style="display: none;" class="alert alert-danger" role="alert">Registration failed. User Exists!</div>
                            <!-- Success message placeholder -->
                            <div id="successMessage" style="display: none;" class="alert alert-success" role="alert">Account created successfully!</div>
                            <button type="submit" class="btn btn-success ">
                                Register
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            </div>

        </div>

    </div>
</div>
<!-- The Modal -->
<!-- Add Bootstrap and jQuery scripts here -->
<div class="jumbotron text-center bg-dark" style="margin-bottom: 0">
    <div class="container footer text-danger">
        <strong class="fa-lg">&copy; 2024 SCMXperLite</strong>
    </div>
</div>

<script>
    let contactForm = document.getElementById("registerForm");
    contactForm.addEventListener("submit", function (e) {
  
});
    const togglePasswordBtn = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');
    const toggleRegPasswordBtn = document.getElementById('toggleRegPassword');
    const regPasswordInput = document.getElementById('regPassword');

    function togglePasswordVisibility(button, input) {
        let passwordVisible = false;

        button.addEventListener('click', function () {
            passwordVisible = !passwordVisible;
            if (passwordVisible) {
                input.setAttribute('type', 'text');
                this.innerHTML = '<i class="fa fa-eye-slash"></i>';
            } else {
                input.setAttribute('type', 'password');
                this.innerHTML = '<i class="fa fa-eye"></i>';
            }
        });
    }
    togglePasswordVisibility(togglePasswordBtn, passwordInput);
    togglePasswordVisibility(toggleRegPasswordBtn, regPasswordInput);
</script>
<script>
    document.getElementById('loginForm').addEventListener('submit', function(event) {
    event.preventDefault();

    var email = document.getElementById('email').value;
    var password = document.getElementById('password').value;

    fetch('http://localhost:7077/login', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ email: email, password: password })
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Invalid credentials');
        }
        return response.json();
    })
    .then(data => {
        console.log(data);
        localStorage.setItem('token', data.token);
        localStorage.setItem('email', data.email);
        localStorage.setItem('username', data.username);
        if (data.roles.includes('ADMIN'))
        {
            window.location.href = 'admindashboard.html?username=' + encodeURIComponent(data.username);
        }
        else{
            window.location.href = 'dashboard.html?username=' + encodeURIComponent(data.username);
        }
    })
    .catch(error => {
        document.getElementById('errorMessage1').textContent = error.message;
        document.getElementById('errorMessage1').style.display = 'block';

        setTimeout(function() {
            document.getElementById('errorMessage1').style.display = 'none';
        }, 3000);
    });
});
</script>
<script>
    document.getElementById('registerForm').addEventListener('submit', function(event) {
    event.preventDefault();

    var username = document.getElementById('username').value;
    var email = document.getElementById('regEmail').value; // Fetch email field value
    var password = document.getElementById('regPassword').value;

    fetch('http://localhost:7077/signup', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ username: username, email: email, password: password })
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Registration failed');
        }
        // Clear form fields
        document.getElementById('username').value = '';
        document.getElementById('regEmail').value = ''; // Clear email field
        document.getElementById('regPassword').value = '';

        // Display success message
        document.getElementById('successMessage').style.display = 'block';

        // Hide success message after 3 seconds
        setTimeout(function() {
            document.getElementById('successMessage').style.display = 'none';
        }, 3000);
    })
    .catch(error => {
        document.getElementById('errorMessage').textContent = error.message;
        document.getElementById('errorMessage').style.display = 'block';

        setTimeout(function() {
            document.getElementById('errorMessage').style.display = 'none';
        }, 3000);

    });

    
});
</script>
</body>
</html>
